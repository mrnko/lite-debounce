class LiteDebounce {
  /**
   * LiteDebounce class constructor
   * @param {Function} fn - The function to debounce
   * @param {number} [delay=300] - Delay in milliseconds between calls
   * @param {Object} [options={}] - Additional options
   * @param {boolean} [options.leading=false] - If true, the function will be called on the leading edge (immediately on the first call)
   */
  constructor(fn, delay = 300, options = {}) {
    this.fn = fn;
    this.delay = delay;
    this.leading = options.leading || false;
    this.timeoutId = null;
    this.leadingCalled = false;
  }
  /**
   * Internal debounced function that receives the call context explicitly
   * @param {any} callContext - The context to use for the original function
   * @param {...any} args - Arguments passed to the original function
   */
  _debouncedFunctionWithContext(callContext, ...args) {
    if (this.leading && !this.leadingCalled) {
      this.fn.apply(callContext, args);
      this.leadingCalled = true;
    }
    clearTimeout(this.timeoutId);
    this.timeoutId = setTimeout(() => {
      if (!this.leading) {
        this.fn.apply(callContext, args);
      }
      this.leadingCalled = false;
    }, this.delay);
  }
  /**
   * Getter for the debounced function
   * Allows using the class instance as a source of a ready-to-use debounced function
   * @returns {Function} - The debounced function
   */
  get fnDebounced() {
    const instance = this;
    return function(...args) {
      return instance._debouncedFunctionWithContext(this, ...args);
    };
  }
}
export {
  LiteDebounce
};
